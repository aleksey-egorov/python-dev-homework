# Python Developer - Homework #12

## Memc Load

Скрипт загрузки файлов в формате protobuf в Memcached. Задача была создать мультипоточную версию скрипта и сравнить ее производительность с однопоточной.

Используется Python 3.6

### Параметры запуска:

* dry - тестовый запуск обработки
* pattern - шаблон имени файла для обработки
* workers - количество воркеров
* test - режим тестирования данных
* log - файл логов
* idfa, gaid, adid, dvid - адреса серверов Memcached для данных соответствующего типа

### Примеры запуска

Запуск обработки файлов с 200 воркерами

    python memc_load_multi.py --pattern=./memcload/*.tsv.gz --workers=200

### Результаты тестирования

Для тестов использовалась одна VM в качестве клиента (1 Core, 4 Gb RAM) и две VM Memcached (1 Core, 4 Gb RAM).
Расчетное время однопоточной обработки одного файла из примерно 3,4 млн строк в данной конфигурации составило более 280 часов.

Обработка одного файла в многопоточной версии с 200 воркерами заняла 1,5 часа.
При этом нагрузка на CPU на машине клиента составила около 40%, на машинах Memcached - около 20%.


