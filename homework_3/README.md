# Python Developer - Homework #3

## Scoring API

API системы скоринга - сервис принимает HTTP запрос с параметрами и указанием метода обработки запроса, и возвращает результат обработки, либо информацию об ошибке.
Запросы отправляются на локейшн /method в формате JSON, результат выдается также в формате JSON.

Параметры запроса:
* account - строка. опционально, может быть пустым
* login - строка, обязательно, может быть пустым
* method - строка, обязательно, может быть пустым
* token - строка, обязательно, может быть пустым
* arguments - словарь (объект JSON), может быть пустым

### Метод online_score
Рассчитывает оценку на основе данных клиента

Словарь arguments - аргументы метода:
* phone - строка или число, длинной 11, начинается с 7, опчионально, может быть пустым
* email - строка, в которой есть @, опционально, может быть пустым
* first_name - строка, опционально, может быть пустым
* last_name - строка, опционально, может быть пустым
* gender - число, 0, 1 или 2, опционально, может быть пустым
* birthday - дата в формате DD.MM.YYYY, с которой прошло не более 70 лет, опционально, может быть пустым

Формат ответа:

    {"code": 200, "response": {"score": 5.0}}

Если пользователь admin - всегда возвращает число 42

Формат ответа при наличии ошибки

    {"code": 422, "error": "<сообщение об ошибке>"}


### Метод clients_interests
Возвращает список интересов пользователей

Словарь arguments - аргументы метода:
* client_ids - список чисел, обязательно, не пустое
* date - дата в формате DD.MM.YYYY, опционально, может быть пустым

Формат ответа:

    {"code": 200, "response": {"1": ["books", "hi-tech"], "2": ["pets", "tv"]}}

Если пользователь admin - всегда возвращает число 42

Формат ответа при наличии ошибки

    {"code": 422, "error": "<сообщение об ошибке>"}


Скрипт сервиса может быть запущен с внешними параметрами:
* log - файл логов скрипта, если параметр не указан - логи выдаются в STDOUT
* port - порт, по которому принимаются запросы на localhost

Для тестирования используются отдельные скрипты test.py и make_query.sh

Используется Python 3.6

### Примеры

Запуск unit-тестирования:

    python3 test.py

Запуск сервиса на порту 8080 с файлом логов:

    python3 api.py --port=8080 --log=./api.log

Пример внешнего запроса на API:

    sh make_query.sh


